<div class="playground">
  <div class="playground__header">

    <div>
      <label>
        Url:
        <input [(ngModel)]="url" type="url" class="focussed" placeholder="https://" >
      </label>

      <label>
        <input type="checkbox" [checked]="showFeed" (change)="showFeed = !showFeed">
        Feed
      </label>
      <label>
        <input type="checkbox" [checked]="showArticles" (change)="showArticles = !showArticles">
        Articles
      </label>

<!--      <button (click)="reset()">Reset</button>-->
      <button (click)="parseFromUrl()" class="focussed">Generate Feed</button>

      <label style="float: right;">
        <input type="checkbox" [checked]="showDebugger" (change)="showDebugger = !showDebugger; showFeed = !showDebugger; showArticles = showDebugger">
        Debugger
      </label>
    </div>

    <div class="feed-url">
      Feed Url: <a [href]="getFeedUrl()">{{ getFeedUrl() }}</a>
    </div>
  </div>

  <div class="playground__panels">

    <!-- Markup ----------------------------------------------------------------------------------------------- -->

    <app-panel id="editor" name="Markup" *ngIf="showDebugger">
      <button (click)="parseHtml()">Generate from HTML</button>
      <textarea [(ngModel)]="html" placeholder="HTML markup of website"></textarea>
    </app-panel>


    <!-- Console ----------------------------------------------------------------------------------------------------- -->

    <app-panel id="console" name="Console" *ngIf="showDebugger">
      <div style="overflow: scroll">
        <div *ngFor="let log of logs">
          {{ log }}
        </div>
      </div>
    </app-panel>

    <!-- Feed -------------------------------------------------------------------------------------------------------- -->

    <app-panel id="feed" style="overflow: auto" name="Feed" *ngIf="showFeed">
      <select [(ngModel)]="options.output">
        <option [ngValue]="output" *ngFor="let output of outputs">{{ output }}</option>
      </select> - {{optionsFromParser.output}}

      <select [(ngModel)]="options.content">
        <option [ngValue]="pageResolution" *ngFor="let pageResolution of pageResolutions">{{ pageResolution }}</option>
      </select> - {{ optionsFromParser.content }}

      <div *ngIf="feeds?.length > 0">
        <p>Feeds Found in DOM:</p>
        <ul>
          <li *ngFor="let feed of feeds"><a [href]="feed.url">{{ feed.name }}</a></li>
        </ul>
      </div>

      <pre [innerText]="feedData"></pre>
    </app-panel>

    <!-- Articles -------------------------------------------------------------------------------------------------- -->

    <app-panel id="articles" style="overflow: auto" name="Articles" *ngIf="showArticles">
      <select (change)="applyRuleFromEvent($event)" [(ngModel)]="currentRule" class="focussed">
        <option *ngFor="let rule of rules" [ngValue]="rule">{{ rule?.score }} points / {{ rule?.articles?.length }} articles / {{ rule?.id }}</option>
      </select>
      <div>
        <div>Score: {{currentRule?.score}}</div>
        <div>Title: {{currentRule?.titlePath }}</div>
        <div>Link: {{currentRule?.rule.linkPath }}</div>
        <div>Context: {{currentRule?.rule.contextElementPath }}</div>
        <div>{{ articles?.length }} articles</div>
        <pre [innerText]="getArticles()"></pre>
      </div>
    </app-panel>

  </div>
</div>
